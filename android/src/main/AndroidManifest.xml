<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.trubka.selfmanaged">

  <uses-permission android:name="android.permission.MANAGE_OWN_CALLS" />
  <uses-permission android:name="android.permission.FOREGROUND_SERVICE" />
  <uses-permission android:name="android.permission.FOREGROUND_SERVICE_PHONE_CALL" />
  <uses-permission android:name="android.permission.USE_FULL_SCREEN_INTENT" />
  <!-- POST_NOTIFICATIONS лучше оставить на уровне приложения -->
  <!-- <uses-permission android:name="android.permission.POST_NOTIFICATIONS" /> -->

  <application>

    <activity
      android:name=".IncomingCallActivity"
      android:exported="false"
      android:showWhenLocked="true"
      android:turnScreenOn="true"
      android:launchMode="singleTask"
      android:taskAffinity="${applicationId}.call"
      android:autoRemoveFromRecents="true"
      android:excludeFromRecents="false"
      android:label="@string/trubka_call_label"
      android:screenOrientation="portrait"
      android:theme="@style/Theme.Trubka.Incoming" />

    <service
      android:name=".IncomingCallService"
      android:exported="false"
      android:foregroundServiceType="phoneCall" />

  </application>
</manifest>
